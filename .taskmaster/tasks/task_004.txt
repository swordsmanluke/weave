# Task ID: 4
# Title: Fix VM Upvalue Resolution Through Call Stack
# Status: done
# Dependencies: 2, 3
# Priority: high
# Description: Implement proper upvalue resolution in VM that correctly traces through the call stack for nested closures
# Details:
Fix VM upvalue resolution in vm.rs to properly handle nested closures. Implement call stack traversal to find upvalue bindings across multiple function call levels. Modify GetUpvalue and SetUpvalue opcode handlers to use upvalue chain resolution. Ensure upvalue lookups correctly find variables in parent scopes regardless of nesting depth. Handle edge cases where upvalues span multiple call frames.

# Test Strategy:
Integration tests with nested closure examples, verify call stack traversal works correctly, test upvalue access across multiple nesting levels
